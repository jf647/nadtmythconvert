publish
-------

- select unpublished from to_publish_dests
  - for each, call publish method in appropriate module
  - if successful, set published to true, publish_date to now() and purge_date to now() - + however many days

inform
------

- select published from to_publish_dests where informed is false
  - for each, select from to_publish_inform where informed is false
    - for each, send email using TT
    - if successful, set informed to true and inform_date to now()

updatestatus
------------

- for each to_publish:
  - for each to_publish_dest:
    - if to_publish_inform.informed is all true, set to_publish_dest.informed to true
  - if to_publish_dest.published is all true, set to_publish.all_published to true
  - if to_publish_dest.all_informed is all true and to_publish.published is true, set to_publish.complete to true

purge
-----

- select published from to_publish_dests where purge_date is < now()
  - for each, call purge method in appropriate module
  - if successful, remove record from to_publish_dests
